<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Hye Sung & Hyo Eun Wedding Invitation</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@600&family=Pretendard&display=swap" rel="stylesheet">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    html, body {
      height: 100%;
      font-family: 'Pretendard', sans-serif;
      background: #fdfdfd;
      overflow: hidden;
      color: #2c2c2c;
    }
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background: url("https://images.unsplash.com/photo-1504198453319-5ce911bafcde?auto=format&fit=crop&w=1500&q=80") center/cover no-repeat;
      opacity: 0.04;
      pointer-events: none;
    }

    #lockScreen {
      position: fixed;
      inset: 0;
      z-index: 999;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 24px;
      background: linear-gradient(to bottom, #ffffffee, #fafafaee);
      text-align: center;
    }

    h1 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2.8rem;
      color: #3b4d3c;
      margin-bottom: 0.5rem;
    }

    .invite-names {
      font-size: 1.4rem;
      font-weight: 600;
      color: #2c3e2c;
    }

    .invite-place {
      font-size: 1rem;
      margin-top: 0.75rem;
      line-height: 1.5;
      color: #4a5e4a;
    }

    input, button {
      width: 260px;
      margin-top: 14px;
      padding: 12px 16px;
      font-size: 1rem;
      border-radius: 10px;
      border: 1px solid #ccc;
      outline: none;
    }

    button {
      background: #a7d8af;
      color: #1f1f1f;
      border: none;
      font-weight: 600;
      transition: 0.3s;
    }
    button:hover {
      background: #8fcf99;
    }

    #bgmInfo {
      position: fixed;
      top: 12px;
      right: 12px;
      font-size: 0.9rem;
      background: rgba(255, 255, 255, 0.85);
      padding: 6px 10px;
      border-radius: 18px;
      backdrop-filter: blur(4px);
      color: #2a2a2a;
      z-index: 200;
    }

    .scroll-container {
      height: 100vh;
      overflow-y: scroll;
      scroll-snap-type: y mandatory;
      scroll-behavior: smooth;
    }

    .slide {
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      background-size: cover;
      background-position: center;
      scroll-snap-align: start;
      opacity: 0;
      transition: opacity 0.8s ease, transform 0.8s ease;
    }
    .slide.show {
      opacity: 1;
      transform: scale(1.02);
    }

    .slide h2 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2.1rem;
      color: #3b4d3c;
      margin-bottom: 1rem;
    }

    .overlay-text {
      background: rgba(255, 255, 255, 0.85);
      padding: 12px 18px;
      border-radius: 16px;
      font-size: 1.1rem;
      color: #2a2a2a;
      text-align: center;
      max-width: 80%;
      font-weight: 600;
      line-height: 1.5;
    }

    .welcome-header {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2.4rem;
      color: #2e2e2e;
    }

    .person-block img {
      width: 260px;
      height: auto;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .calendar-box, .info-card {
      background: #ffffffee;
      padding: 24px;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }

    .map-link, .rsvp a {
      background: #a7d8af;
      color: #1f1f1f;
      padding: 10px 20px;
      border-radius: 8px;
      text-decoration: none;
      font-weight: 600;
    }
    .map-link:hover, .rsvp a:hover {
      background: #8fcf99;
    }

    .rsvp {
      background: #f6fdf5;
      padding: 40px 20px;
      text-align: center;
    }

    .rsvp h2 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2.2rem;
      color: #3b4d3c;
    }

    .rsvp form {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-top: 20px;
    }

    .rsvp input, .rsvp textarea {
      padding: 12px;
      border: 1px solid #ccc;
      border-radius: 10px;
      font-size: 1rem;
    }

    .rsvp button {
      background: #a7d8af;
      color: #1f1f1f;
      font-weight: 600;
      border: none;
      border-radius: 10px;
      padding: 12px;
      margin-top: 10px;
      transition: background 0.3s ease;
    }
    .rsvp button:hover {
      background: #8fcf99;
    }
  </style>
</head>
<body>
  <div id="pcBlocker">
    <div style="max-width: 300px;">
      <div style="font-size: 4rem; margin-bottom: 20px;"></div>
      <p data-lang-ko="모바일로 접속해 주세요📱"
         data-lang-en="Please open on your mobile📱"
         data-lang-ja="スマートフォンで開いてください📱">
         모바일로 접속해 주세요
      </p>
      <p style="margin-top: 10px; font-size: 0.9rem; color: #666;">
        QR 코드를 스캔하거나 모바일 기기로 접속하세요
      </p>
      <img src="/Wed_Invitation/assets/img/QR.png" alt="모바일 청첩장 QR코드" style="width: 200px; margin-top: 1em;" />
    </div>
  </div>
  
  <div id="lockScreen">
    <div class="lang-row">
      <span>🌐</span>
      <select id="languageSelect">
        <option value="ko">한국어</option>
        <option value="en">English</option>
        <option value="ja">日本語</option>
      </select>
    </div>

<div id="bgmInfo" style="display: none;"></div>

    <h1 class="invite-date" style="font-family: 'Dancing Script', cursive; font-size: 2.5rem; color: #3b4d3c;">
      Wedding Invitation
    </h1>

    <p class="invite-names"
       data-lang-ko="전혜성 - 남효은"
       data-lang-en="Chun Hye Sung & Nam Hyo Eun"
       data-lang-ja="ジョン•ヘソン & 南暁銀"
       style="margin-bottom: 12px; font-size: 1.2rem;">
       전혜성 - 남효은
    </p>

    <p class="invite-place"
       data-lang-ko="2025년 9월 20일 토요일 오후 12시<br>라비돌 리조트 야외 예식장"
       data-lang-en="Saturday, September 20, 2025 at 12:00 PM<br>Laviedor Resort Outdoor Venue"
       data-lang-ja="2025年9月20日 土曜日 午後12時<br>ラビドールリゾート 屋外挙式場"
       style="text-align: center; font-size: 1rem; line-height: 1.6;">
       2025년 9월 20일 토요일 오후 12시<br>라비돌 리조트 야외 예식장
    </p>
      
    <input type="text" id="pwInput" placeholder="초대 코드를 입력하세요" />
    <button id="unlockBtn">청첩장 열기</button>
  </div>
  
  <audio id="bgm" loop muted>
    <source src="assets/audio/bgm.mp3" type="audio/mpeg" />
  </audio>


  <main id="mainContent" style="display:none">
    <div class="scroll-container">

      <!-- Slide 1 -->
      <section class="slide fade" style="background-image:url('/Wed_Invitation/assets/img/1.jpg')">
        <div class="welcome-header">We're getting married<br>Hyesung & Hyo Eun</div>
      </section>

      <!-- Slide 2 -->
      <section class="slide fade" style="background-image:url('/Wed_Invitation/assets/img/2.jpg')">
      </section>

      <!-- Slide 3 -->
      <section class="slide fade" style="background-image:url('/Wed_Invitation/assets/img/3.jpg')">
      </section>

      <!-- Groom -->
      <section class="slide person fade" style="background-image: url('/Wed_Invitation/assets/img/groom_bg.png'); background-size: cover; background-position: center;">
        <h2 data-lang-ko="신랑: 전혜성" data-lang-ja="新郎: ジョン•ヘソン" data-lang-en="Groom: Paul">신랑</h2>
        <div class="person-block groom">
          <img src="/Wed_Invitation/assets/img/groom.jpg" alt="신랑" />
          <p data-lang-ko="언제나 곁에 있어줘서 진심으로 고마워. 함께할 우리의 미래가 벌써부터 기대돼."
             data-lang-ja="どんな時もそばにいてくれる君に、心から感謝しています。 一緒に過ごす未来が、今からとても楽しみです。"
             data-lang-en="Thank you from the bottom of my heart for always being by my side. I'm so looking forward to our future together.">
            언제나 곁에 있어줘서 진심으로 고마워. 함께할 우리의 미래가 벌써부터 기대돼.
          </p>
        </div>
      </section>

      <!-- Bride -->
      <section class="slide person fade" style="background-image: url('/Wed_Invitation/assets/img/bride_bg.png'); background-size: cover; background-position: center;">
        <h2 data-lang-ko="신부: 남효은" data-lang-ja="新婦: 南暁銀" data-lang-en="Bride: Monica">신부</h2>
        <div class="person-block bride">
          <img src="/Wed_Invitation/assets/img/bride.jpg" alt="신부" />
          <p data-lang-ko="앞으로도 잘 먹고 잘 자고, 행복하게 지내자. 나는 언제나 오빠 옆에서 웃고 있을게!"
             data-lang-ja="これからも、よく食べてよく寝て、元気でいてね。私はその隣で笑ってます！"
             data-lang-en="Keep eating well, sleeping soundly, and staying happy, I'll be right beside you, smiling all the way.">
            앞으로도 잘 먹고 잘 자고, 행복하게 지내줘. 나는 언제나 오빠 옆에서 웃고 있을게!
          </p>
        </div>
      </section>

      <!-- Calendar -->
      <section class="slide calendar fade" style="background-image: url('/Wed_Invitation/assets/img/calendar_bg.png'); background-size: cover; background-position: center;">
        <h2 data-lang-ko="결혼식은 이 날이에요" data-lang-ja="結婚式はこの日です" data-lang-en="The Wedding Day"> 결혼식은 이 날이에요</h2>
        <div class="calendar-box">
          <div class="month" id="calendarMonth">2025년 9월</div>
          <div class="days" id="calendarDays">
          </div>
        </div>
      </section>

      <!-- Location -->
      <section class="slide info fade" style="background-image: url('/Wed_Invitation/assets/img/location_bg.png'); background-size: cover; background-position: center;">
        <div class="info-card">
          <h2 data-lang-ko="오시는 길" data-lang-ja="アクセス" data-lang-en="How to Get There">오시는 길</h2>
          <p id="mapText"
            data-lang-ko="📍 경기도 화성시 정남면 세자로 286<br>🚌 수원역 6-3번 / 병점역 35-1, 35-3, 50번<br><a href='https://laviedor.com/mresort/about.asp?t=4' target='_blank'>라비돌 리조트 안내</a><br><br>🗺️ 지도에서 보기:<br><a class='map-link' href='https://naver.me/GNWkr4t4' target='_blank'>네이버 지도 열기</a>"
            data-lang-ja="📍 京畿道 華城市 正南面 世子路 286<br>🚌 水原駅 6-3番 / 餅店駅 35-1, 35-3, 50番<br><a href='https://laviedor.com/mresort/about.asp?t=4' target='_blank'>ラビドールリゾート案内</a><br><br>🗺️ 地図で見る:<br><a class='map-link' href='https://naver.me/GNWkr4t4' target='_blank'>ネイバーマップを見る</a>"
            data-lang-en="📍 286, Sejaro, Jeongnam-myeon, Hwaseong-si, Gyeonggi-do<br>🚌 Suwon Sta. 6-3 / Byeongjeom Sta. 35-1, 35-3, 50<br><a href='https://laviedor.com/mresort/about.asp?t=4' target='_blank'>Laviedor Resort Info</a><br><br>🗺️ View on Map:<br><a class='map-link' href='https://naver.me/GNWkr4t4' target='_blank'>Open Naver Map</a>">
            📍 경기도 화성시 정남면 세자로 286<br>🚌 수원역 6-3번 / 병점역 35-1, 35-3, 50번<br>
            <a href="https://laviedor.com/mresort/about.asp?t=4" target="_blank">라비돌 리조트 안내</a><br><br>
            🗺️ 지도에서 보기:<br>
            <a class="map-link" href="https://naver.me/GNWkr4t4" target="_blank">네이버 지도 열기</a>
          </p>
        </div>
      </section>

<!-- RSVP -->
<section class="slide rsvp fade" style="background-image: url('/Wed_Invitation/assets/img/rsvp_bg.png'); background-size: cover; background-position: center;">
  <h2>RSVP</h2>
  <p class="rsvp-header"
     data-lang-ko="참석 여부를 확인해 주세요"
     data-lang-ja="ご出席の有無をご確認ください"
     data-lang-en="Please confirm your attendance">
     참석 여부를 확인해 주세요
  </p>
        <p id="rsvpDeadline" class="rsvp-header"
           data-lang-ko="번거로우시겠지만 8월 15일까지 참석 여부를 알려주시면 감사하겠습니다."
           data-lang-ja="お手数をおかけいたしますが、8月15日までにご出欠のご連絡をお願いいたします。"
           data-lang-en="We kindly ask you to RSVP by August 15. Thank you in advance.">
           번거로우시겠지만 8월 15일까지 참석 여부를 알려주시면 감사하겠습니다.
        </p>
    <a href="https://docs.google.com/forms/d/e/1FAIpQLSfm5VU9yue9JbYLlwtoAubRpp75gqGiz_hGHfN7phhrroN2lQ/viewform?usp=dialog"
     target="_blank"
     id="rsvpBtn"
     data-lang-ko="Google 폼으로 RSVP 하기"
     data-lang-en="Submit RSVP via Google Form"
     data-lang-ja="Googleフォームで出席確認"
     style="display: inline-block; margin-top: 12px; padding: 14px 24px; background: #4b6b4f; color: white; font-size: 1rem; border-radius: 8px; text-decoration: none;">
     Google 폼으로 RSVP 하기
  </a>
</section>
    </div>
  </main>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const $scrollContainer = document.querySelector('.scroll-container');
  if ($scrollContainer) {
    $scrollContainer.scrollTo({ top: 0, behavior: 'smooth' });
  }

  const $pcBlocker = document.getElementById('pcBlocker');
  const $lockScreen = document.getElementById('lockScreen');
  const $mainContent = document.getElementById('mainContent');
  const $pwInput = document.getElementById('pwInput');
  const $unlockBtn = document.getElementById('unlockBtn');
  const $bgm = document.getElementById('bgm');
  const $bgmInfo = document.getElementById('bgmInfo');
  const $slides = document.querySelectorAll('.slide');
  const $langSel = document.getElementById('languageSelect');
  const $rsvpBtn = document.getElementById('rsvpBtn');
  const $allTransEls = document.querySelectorAll('[data-lang-ko]');

  const INVITE_CODE = '0920';
  let currentLang = 'ko';

  function isMobileDevice() {
    const hasTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
    const ua = navigator.userAgent.toLowerCase();
    const mobileUA = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile|tablet/i.test(ua);
    const screenWidth = Math.max(window.innerWidth, window.innerHeight);
    const isMobileScreen = screenWidth <= 1024;
    const isMobileBrowser = /mobi|android/i.test(ua);
    const mediaQuery = window.matchMedia('(hover: none) and (pointer: coarse)');
    const isTouchDevice = mediaQuery.matches;
    return hasTouch || mobileUA || isMobileBrowser || isTouchDevice || (isMobileScreen && hasTouch);
  }

  function checkDevice() {
    if (!isMobileDevice()) {
      $pcBlocker.style.display = 'flex';
      $lockScreen.style.display = 'none';
      $mainContent.style.display = 'none';
    } else {
      $pcBlocker.style.display = 'none';
      $lockScreen.style.display = 'flex';
    }
  }

  checkDevice();
  let resizeTimer;
  window.addEventListener('resize', () => {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(checkDevice, 250);
  });

  const strings = {
    ko: {
      namePh: '성함',
      msgPh: '남기실 말씀 (예: 숙박이 필요합니다)',
      codePh: '초대 코드를 입력하세요',
      btnOpen: '청첩장 열기',
      btnSend: '보내기',
      bgm: '🎵 - ありがとう',
      alertWrong: '코드가 틀립니다.',
      rsvpBtn: 'Google 폼으로 RSVP 하기',
    },
    en: {
      namePh: 'Your name',
      msgPh: 'Message (e.g. need accommodation)',
      codePh: 'Enter invitation code',
      btnOpen: 'Open Invitation',
      btnSend: 'Send',
      bgm: '🎵 - Arigatou',
      alertWrong: 'Wrong code.',
      rsvpBtn: 'Submit RSVP via Google Form',
    },
    ja: {
      namePh: 'お名前',
      msgPh: 'メッセージ (例: 宿泊が必要です)',
      codePh: '招待コードを入力してください',
      btnOpen: '招待状を開く',
      btnSend: '送信',
      bgm: '🎵 - ありがとう',
      alertWrong: 'コードが違います。',
      rsvpBtn: 'Googleフォームで出席確認',
    }
  };

  function applyLang(lang) {
    currentLang = lang;
    const L = strings[lang];
    $allTransEls.forEach(el => {
      const txt = el.getAttribute(`data-lang-${lang}`);
      if (txt) el.innerHTML = txt;
    });

    $pwInput.placeholder = L.codePh;
    $unlockBtn.textContent = L.btnOpen;
    $bgmInfo.textContent = L.bgm;
    if ($rsvpBtn) $rsvpBtn.textContent = L.rsvpBtn;
  }

  $langSel.addEventListener('change', e => {
    applyLang(e.target.value);
    renderCalendar(e.target.value);
  });

  $unlockBtn.addEventListener('click', () => {
    if ($pwInput.value.trim() === INVITE_CODE) {
      $lockScreen.style.display = 'none';
      $mainContent.style.display = 'block';
      $bgm.muted = false;
      $bgm.currentTime = 0;
      $bgm.play().catch(err => {
        console.warn('BGM autoplay failed:', err);
      });
      $slides.forEach(slide => slide.classList.add('show'));
    } else {
      alert(strings[currentLang]?.alertWrong || strings.ko.alertWrong);
    }
  });

  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('show');
        $bgmInfo.style.display = (entry.target === $slides[0]) ? 'flex' : 'none';
      }
    });
  }, { threshold: 0.25, root: $scrollContainer });

  $slides.forEach(slide => observer.observe(slide));

  applyLang(currentLang);
  renderCalendar(currentLang);

  function renderCalendar(lang) {
    const calendarDaysEl = document.getElementById('calendarDays');
    const calendarMonthEl = document.getElementById('calendarMonth');
    const highlightDate = 20;

    const weekdays = {
      ko: ['일', '월', '화', '수', '목', '금', '토'],
      en: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
      ja: ['日', '月', '火', '水', '木', '金', '土']
    };
    const monthNames = {
      ko: '2025년 9월',
      en: 'September 2025',
      ja: '2025年9月'
    };

    if (calendarMonthEl) calendarMonthEl.textContent = monthNames[lang];

    const year = 2025;
    const month = 8; // 9월 (JS는 0부터 시작)
    const firstDay = new Date(year, month, 1).getDay();
    const totalDays = new Date(year, month + 1, 0).getDate();

    let html = '';
    html += weekdays[lang].map(day =>
      `<div class="day-cell"><span class="day">${day}</span></div>`
    ).join('');

    let cellIndex = 0;
    for (let i = 0; i < firstDay; i++) {
      html += `<div class="day-cell"><span class="day"></span><span class="date"></span></div>`;
      cellIndex++;
    }
    for (let day = 1; day <= totalDays; day++) {
      const isHighlight = day === highlightDate ? 'highlight' : '';
      html += `
        <div class="day-cell ${isHighlight}">
          <span class="day"></span>
          <span class="date">${day}</span>
        </div>`;
      cellIndex++;
    }

    calendarDaysEl.innerHTML = html;
  }
});
</script>
</body>
</html>
